总操纵流程：
- 1、[下载安装](#go-01)
- 2、[创建项目](#go-02)
- 3、[测试](#go-03)

***

> 注意：该教程基于”2.go之vscode开发工具的搭建“

# <a name="go-01" href="#" >下载安装</a>

> 1、protoc的下载安裝

- 下载

[![](https://img.shields.io/badge/github-protoc-blued.svg "github protoc")](https://github.com/protocolbuffers/protobuf/releases/tag/v3.8.0-rc1)

- 配置变量环境

```
变量名：  PROTOC_HOME
变量值：  C:\Software\protoc
Path:    ;%PROTOC_HOME%\bin
```

- cmd测试

```
protoc --version
```

>2、github下载golang.org\x和google.golang.org的组件（go get这两边依赖因被墙）

'注意：在vs code的控制台输入命令'

- golang.org/x

```
cd D:\goWork\src\golang.org\x

git clone https://github.com/golang/crypto.git
```

- google.golang.org

```
mkdir D:\goWork\src\google.golang.org
cd D:\goWork\src\google.golang.org

git clone https://github.com/googleapis/go-genproto.git

git clone https://github.com/grpc/grpc-go.git

mv go-genproto genproto

mv grpc-go grpc
```


> 3、下载安装go的组件

```go
go get -u -v github.com/golang/protobuf/proto
go get -u -v github.com/golang/protobuf/protoc-gen-go
go get -u -v github.com/micro/protoc-gen-micro
go get -v github.com/micro/go-micro
```

[![](https://img.shields.io/badge/百度云-下载好的-green.svg "百度云 下载好的")](https://pan.baidu.com/s/1asiYWpxb_pXftGCbBgVcLA)

# <a name="go-02" href="#" >创建项目</a>

> 1、创建greeter.proto文件

```
mkdir D:\goWork\src\myTest\proto

cd D:\goWork\src\myTest\proto
```

```go
// $GOPATH/greeter/proto/greeter.proto
syntax = "proto3";

service Greeter {
	rpc Hello(HelloRequest) returns (HelloResponse) {}
}

message HelloRequest {
	string name = 1;
}

message HelloResponse {
	string greeting = 2;
}
```

> 2、创建service.go文件

```
mkdir D:\goWork\src\myTest\service

cd D:\goWork\src\myTest\service
```

```go
package main

import (
	"context"
	"fmt"

	proto "myTest/proto"

	"github.com/micro/go-micro"
)

type Greeter struct{}

func (g *Greeter) Hello(ctx context.Context, req *proto.HelloRequest, rsp *proto.HelloResponse) error {
	rsp.Greeting = "Hello " + req.Name
	return nil
}

func main() {
	// Create a new service. Optionally include some options here.
	service := micro.NewService(
		micro.Name("greeter"),
	)

	// Init will parse the command line flags.
	service.Init()

	// Register handler
	proto.RegisterGreeterHandler(service.Server(), new(Greeter))

	// Run the server
	if err := service.Run(); err != nil {
		fmt.Println(err)
	}
}

```

> 3、创建client.go文件

```
mkdir D:\goWork\src\myTest\client

cd D:\goWork\src\myTest\client

```

```go
package main

import (
	"context"
	"fmt"

	proto "myTest/proto"

	"github.com/micro/go-micro"
)

func main() {
	// Create a new service. Optionally include some options here.
	service := micro.NewService(micro.Name("greeter.client"))
	service.Init()

	// Create new greeter client
	greeter := proto.NewGreeterService("greeter", service.Client())

	// Call the greeter
	rsp, err := greeter.Hello(context.TODO(), &proto.HelloRequest{Name: "John"})
	if err != nil {
		fmt.Println(err)
	}

	// Print response
	fmt.Println(rsp.Greeting)
}
```

> 2、编译.proto文件

```
cd  d:/goWork/src/myTest/proto

C:\Software\protoc\bin\protoc.exe --plugin=protoc-gen-go=D:\goWork\bin\protoc-gen-go.exe --proto_path=./ --go_out=./ --micro_out=./ greeter.proto
```

# <a name="go-03" href="#" >测试</a>

- 开两个vscode控制台

```go
cd d:/goWork/src

go run myTest/service/service.go
```


```go
cd d:/goWork/src

go run myTest/client/client.go
```
