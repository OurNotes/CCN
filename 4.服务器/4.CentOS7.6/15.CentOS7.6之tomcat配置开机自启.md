总操作流程:
- 1、[tomcat的jsvc安装配置](#Linux-01)
- 2、[tomcat的自启配置](#Linux-02)
- 3、[测试](#Linux-03)

***

# <a name="Linux-01" href="#" >tomcat的jsvc安装配置</a>

> 1、jsvc安装
```shell
cd /usr/local/tomcat/bin
tar -zxvf commons-daemon-native.tar.gz
cd commons-daemon-1.1.0-native-src/unix
./configure --with-java=/usr/local/java/jdk
make
cp -Rf jsvc /usr/local/tomcat/bin
cd /usr/local/tomcat/bin
./jsvc --help #测试是否成功
```

# <a name="Linux-02" href="#" >tomcat的自启配置</a>

>1、创建用户和组
```shell
groupadd tomcat

useradd tomcat -s /sbin/nologin -M

useradd tomcat -s /sbin/nologin -M 
```

>2、设置后台启动脚本
```shell
vim /usr/local/tomcat/bin/daemon.sh
```

```shell
找到&& TOMCAT_USER=tomcat，将这里的TOMCAT_USER设置为创建的用户。
若本来就使用的tomcat用户，所以这里不用改

取消JAVA_HOME的注释，并改为自己的jdk配置路径
JAVA_HOME=/usr/local/java/jdk
```

```
chmod -R 777 /usr/local/tomcat
chmod -R 777 /usr/local/tomcat/bin/daemon.sh
```

>3、创建开机启动服务文件

```
vim /usr/lib/systemd/system/tomcat.service
```

```
[Unit]
Description=Apache Tomcat
After=network.target remote-fs.target nss-lookup.target

[Service]
Type=forking
PIDFile=/usr/local/tomcat/mytomcat.pid
Environment=JAVA_HOME=/usr/local/java/jdk
Environment=CATALINA_HOME=/usr/local/tomcat

ExecStart=/usr/local/tomcat/bin/daemon.sh start
ExecStop=/usr/local/tomcat/bin/daemon.sh stop
User=tomcat
Group=tomcat
PrivateTmp=true
[Install]
WantedBy=multi-user.target
```

```
 chmod 0777 /usr/lib/systemd/system/tomcat.service
```


>4、设置开机启动，并启动服务

```
#重新加载一下配置。每次改动后也要重新加载
systemctl daemon-reload
#设置允许开机自启动
systemctl enable tomcat 

#启动服务
systemctl start tomcat
#查看状态
systemctl status tomcat
#查看服务是否激活
systemctl is-active tomcat

##其它命令
# 禁止开机启动
systemctl disable tomcat
# 停止服务
systemctl stop tomcat
# 重启服务
systemctl restart tomcat

```


# <a name="Linux-03" href="#" >测试</a>

```shell
reboot
```
