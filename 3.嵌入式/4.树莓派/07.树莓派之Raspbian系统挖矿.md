总操作流程
- 1、钱包的安装
- 2、P2Pool 矿池节点的安装

***

# 钱包的安装


> 安装

```shell
mkdir /home/pi/bitcoin

chmod 777 /home/pi/bitcoin

cd /home/pi/bitcoin

git clone https://github.com/bitcoin/bitcoin.git

ln -fs /home/pi/bitcoin/bitcoin-0.19.0.1/bin/bitcoind /usr/bin/bitcoind
ln -fs /home/pi/bitcoin/bitcoin-0.19.0.1/bin/bitcoin-cli /usr/bin/bitcoin-cli

mkdir datadir
mkdir ~/.bitcoin

vim ~/.bitcoin/bitcoin.conf

```

```shell
# 配置我们刚刚创建的数据存储目录
dir=/home/pi/bitcoin/datadir
# 设置数据库缓存大小
dbcache=5024000
# 交易索引 txindex=1就代表全节点
txindex=1
# rpc访问的user
rpcuser=abcd
# rpc访问的password
rpcpassword=123456
# 后台启动
daemon=1
#开启JSON-RPC接口
server=1
rest=1
#进入监听模式
listen=1
#rpc接口的监听地址，默认绑定到所有IP
rpcbind=0.0.0.0
#rpcallowip是哪个IP调用钱包节点就填什么IP（类似允许谁访问的意思）
rpcallowip=127.0.0.1
#rpcport是访问该节点的端口
rpcport=8332
port=8333
```

> 防火墙开发端口

```
ufw allow 8332/tcp
```

> 设置开机自启

```
touch /etc/systemd/system/bitcoind.service
chmod 664 /etc/systemd/system/bitcoind.service
chmod 664 /home/pi/bitcoin/.bitcoin/bitcoin.conf
vim /etc/systemd/system/bitcoind.service
```

```shell
[Unit]
Description=Bitcoin deamon service
After=network.target
 
[Service]
User=root
Group=root
Type=forking
PIDFile=/root/.bitcoin/bitcoind.pid
ExecStart=/home/pi/bitcoin/bitcoin-0.19.0.1/bin/bitcoind -daemon -conf=/root/.bitcoin/bitcoin.conf -pid=/root/.bitcoin/bitcoind.pid
Restart=on-failure
KillMode=process
Restart=always
TimeoutSec=120
RestartSec=30
 
[Install]
WantedBy=multi-user.target
```
```
systemctl daemon-reload
systemctl disable bitcoind.service
systemctl enable bitcoind.service

reboot

service bitcoind start
```


# P2Pool 矿池节点的安装

> 安装

```
apt-get install python-zope.interface python-twisted python-twisted-web git python-dev

apt-get install python-argparse

apt-get install libpython2.7-stdlib

cd /home/pi

git clone https://github.com/p2pool/p2pool.git

chmod 777 p2pool

cd p2pool/litecoin_scrypt

python setup.py install

cd ..

python run_p2pool.py abcd 123456 --net litecoin --give-author 0 -f 0 -a  --bitcoind-rpc-port=8332 --bitcoind-p2p-port=8333

```