总操作流程：
- 1、[项目上传](#go-01)
- 2、[配置](#go-02)
- 3、[测试](#go-03)

***

# <a name="go-01" href="#" >项目上传</a>

```shell
mkdir -p /usr/local/nginx/go
chmod 777 /usr/local/nginx/go

```

- 打包[gin之快速开始](https://github.com/OurNotes/CCN/blob/master/06.%E5%90%8E%E5%8F%B0/04.go/02.go%E4%B9%8B%E6%A1%86%E6%9E%B6/01.go%E4%B9%8Bweb%E6%A1%86%E6%9E%B6%EF%BC%9Agin/01.gin%E4%B9%8B%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B.md)这个项目

```shell
# vs code终端输入命令
set GOOS=linux
set GOARCH=amd64
go build test.go
```

```shell
# 项目上传go项目
cd /usr/local/nginx/go

chmod 777 /usr/local/nginx/go/test
```

# <a name="go-02" href="#" >配置</a>

> 1、安装

- [CentOS7安装nginx](https://github.com/OurNotes/CCN/blob/master/04.linux/04.CentOS7.6/10.CentOS7.6%E4%B9%8B%E5%AE%89%E8%A3%85nginx.md)

> 2、配置

```
cd ~ 

vim /usr/local/nginx/conf/nginx.conf
```


- 加多一个server
```js
    server {
        listen       81;
        server_name  localhost;

        charset utf-8;
        access_log  /usr/local/nginx/logs/access.log;

        location ~ \.(css|js|fonts|png|svg|html|txt)$ {
            access_log on;
            expires 1d;
            
            root "/usr/local/nginx/go";
            try_files $uri @backend;
        }

        location / {
            try_files /_not_exists_ @backend;
        }

        location @backend {
            proxy_set_header X-Forwarded-For $remote_addr;
            proxy_set_header Host            $http_host;
            proxy_pass http://127.0.0.1:8080;
        }
    }

```

> 2、防火墙配置

```
firewall-cmd --permanent --zone=public --add-port=81/tcp
firewall-cmd --permanent --zone=public --add-port=8080/tcp
firewall-cmd --reload
```

# <a name="go-03" href="#" >测试</a>

> 1、开启服务器

```shell
cd ~

cd /usr/local/nginx/sbin

# 开启
./nginx

# 停止
./nginx -s stop
```

> 2、后台运行go程序

```shell
cd /usr/local/nginx/go
nohup ./test >log.txt &
```

> 使用postman测试接口：http://192.168.42.128:81/ping
