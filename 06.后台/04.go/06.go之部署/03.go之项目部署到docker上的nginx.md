总操作流程：
- 1、[下载安装](#go-01)
- 2、[配置](#go-02)
- 3、[测试](#go-03)

***

# <a name="go-01" href="#" >下载安装</a>

> 下拉nginx

```shell
docker pull nginx:latest
```

> 创建nginx容器

```shell
docker run --name nginx -p 81:80 -d nginx
```

> 防火墙开放端口

```
firewall-cmd --permanent --zone=public --add-port=81/tcp
firewall-cmd --reload
firewall-cmd --zone=public --query-port=81/tcp
```

# <a name="go-02" href="#" >配置</a>

> 创建文件

```shell
docker exec -it nginx /bin/bash

mkdir -p /etc/go
mkdir -p /etc/logs

chmod 777 /etc/go
chmod 777 /etc/logs

cd /etc/logs

touch error.log
touch access.log

chmod 777 error.log
chmod 777 access.log
```

> 修改nginx配置

- 按快捷键退出容器：<kbd>Ctrl</kbd>+<kbd>D</kbd>

```
docker cp nginx:/etc/nginx/conf.d/default.conf /
```
- 修改配置

```
vim /default.conf
```

```js
server {
        listen       80;
        server_name  localhost;

        charset utf-8;
        access_log  /etc/logs/access.log;

        location ~ \.(css|js|fonts|png|svg|html|txt)$ {
            access_log on;
            expires 1d;
            
            root "/etc/go";
            try_files $uri @backend;
        }

        location / {
            try_files /_not_exists_ @backend;
        }

        location @backend {
            proxy_set_header X-Forwarded-For $remote_addr;
            proxy_set_header Host            $http_host;
            proxy_pass http://127.0.0.1:8080;
        }
    }
```

- 将修改好的配置文件复制回去

```
docker cp /default.conf nginx:/etc/nginx/conf.d
```


> 上传项目

```
docker cp /test nginx:/etc/go
```

# <a name="go-03" href="#" >测试</a>

> 重启启动docker

```
docker stop nginx
docker start nginx
```

> 启动go的程序

```shell
docker exec -it nginx /bin/bash

cd /etc/go
chmod 777 test
nohup ./test >log.txt &

```

> 使用postman测试接口：http://192.168.42.128:81/ping